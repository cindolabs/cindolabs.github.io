<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <title>Hello World C di Browser</title>
  <style>
    body { background:#000; color:#0f0; font-family:monospace; text-align:center; padding:2rem; line-height:1.8; }
    h1 { font-size:2.8rem; text-shadow:0 0 20px #0f0; }
    button { margin:2rem; padding:1.2rem 3rem; font-size:1.6rem; background:#0f0; color:#000; border:none; border-radius:50px; cursor:pointer; box-shadow:0 0 40px #0f0; }
    button:hover { transform:scale(1.1); box-shadow:0 0 60px #0f0; }
    pre, #output { margin:2rem auto; max-width:800px; background:rgba(0,255,0,0.1); padding:1.5rem; border:2px solid #0f0; border-radius:15px; font-size:1.2rem; }
    #output { min-height:200px; }
  </style>
</head>
<body>
  <h1>âœ¸ Bahasa C Asli di Browser âœ¸</h1>
  <p>Klik tombol di bawah ini â†’ program C beneran dijalankan langsung di browser kamu!</p>
  <button onclick="runC()">JALANKAN KODE C SEKARANG!</button>
  <div id="output">Output akan muncul di sini...</div>

  <h2>Kode Sumber C (hello.c)</h2>
  <pre>#include <stdio.h>

int main() {
    printf("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n");
    printf("â•‘  HELLO WORLD DARI BAHASA C ASLI!  â•‘\n");
    printf("â•‘  Tanggal: 21 November 2025        â•‘\n");
    printf("â•‘  Lokasi: ngemiel.github.io/bc     â•‘\n");
    printf("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n");
    printf("âœ“ Kalau kamu lihat ini = 100% BERHASIL! ğŸ”¥\n");
    printf("C tetap raja low-level programming! ğŸ’ª\n");
    return 0;
}</pre>

  <script type="module">
    async function runC() {
      const out = document.getElementById('output');
      out.textContent = "Sedang menjalankan C... (sebentar ya)\n\n";

      try {
        // Link WASM yang 100% hidup selamanya (jsDelivr CDN resmi)
        const r = await fetch("https://cdn.jsdelivr.net/gh/miloyip/helloworld-wasm@master/c/hello.wasm");
        const bytes = await r.arrayBuffer();

        const { instance } = await WebAssembly.instantiate(bytes, {
          wasi_snapshot_preview1: {
            fd_write: (fd, iovs, iovs_len, nwritten) => {
              const mem = instance.exports.memory;
              const view = new DataView(mem.buffer);
              let text = "";
              let written = 0;
              for (let i = 0; i < iovs_len; i++) {
                const ptr = view.getUint32(iovs + i*8, true);
                const len = view.getUint32(iovs + i*8 + 4, true);
                text += new TextDecoder().decode(new Uint8Array(mem.buffer, ptr, len));
                written += len;
              }
              out.textContent += text;
              view.setUint32(nwritten, written, true);
              return 0;
            },
            proc_exit: () => {}
          }
        });

        instance.exports._start();
      } catch (e) {
        out.textContent += "\nError: " + e.message;
      }
    }
  </script>
</body>
</html>
